/*
502. IPO
Solved
Hard
Topics
Companies
Suppose LeetCode will start its IPO soon. In order to sell a good price of its shares to Venture Capital, LeetCode would like to work on some projects to increase its capital before the IPO. Since it has limited resources, it can only finish at most k distinct projects before the IPO. Help LeetCode design the best way to maximize its total capital after finishing at most k distinct projects.

You are given n projects where the ith project has a pure profit profits[i] and a minimum capital of capital[i] is needed to start it.

Initially, you have w capital. When you finish a project, you will obtain its pure profit and the profit will be added to your total capital.

Pick a list of at most k distinct projects from given projects to maximize your final capital, and return the final maximized capital.

The answer is guaranteed to fit in a 32-bit signed integer.

 

Example 1:

Input: k = 2, w = 0, profits = [1,2,3], capital = [0,1,1]
Output: 4
Explanation: Since your initial capital is 0, you can only start the project indexed 0.
After finishing it you will obtain profit 1 and your capital becomes 1.
With capital 1, you can either start the project indexed 1 or the project indexed 2.
Since you can choose at most 2 projects, you need to finish the project indexed 2 to get the maximum capital.
Therefore, output the final maximized capital, which is 0 + 1 + 3 = 4.
Example 2:

Input: k = 3, w = 0, profits = [1,2,3], capital = [0,1,2]
Output: 6
 

Constraints:

1 <= k <= 105
0 <= w <= 109
n == profits.length
n == capital.length
1 <= n <= 105
0 <= profits[i] <= 104
0 <= capital[i] <= 109
*/

function findMaximizedCapital(k: number, w: number, profits: number[], capital: number[]): number {
  const n = profits.length;
  const map = new Map<number, number[]>();

  for (let i = 0; i < n; i++) {
    if (map.get(profits[i]) === undefined) map.set(profits[i], []);
    map.get(profits[i])!.push(capital[i]);
  }

  const profitValues = Array.from(map.keys()).sort((a, b) => b - a);
  for (let x of profitValues) {
    map.get(x)!.sort((a, b) => b - a);
  }

  // for (let x of profitValues) {
  //   console.log(x, map.get(x));
  // }

  while (k > 0) {
    const flag = k;
    for (let x of profitValues) {
      const arr = map.get(x)!;
      if (arr.length > 0 && arr[arr.length - 1] <= w) {
        w += x;
        k--;
        arr.pop();
        break;
      }
    }
    if (flag === k) return w;
  }

  return w;
}

const k = 11,
  w = 2,
  profits = [
    319, 178, 37, 756, 152, 763, 481, 1055, 594, 825, 759, 494, 1087, 696, 717, 358, 1091, 1145, 1043, 245, 779, 957, 3, 1060, 1141, 926, 226, 657, 869, 740, 1170, 746, 889, 416, 634, 209, 1189, 1076, 819, 1144, 40, 807, 561, 400, 283, 133,
    186, 839, 1043, 491, 936, 559, 70, 9, 854, 1172, 9, 739, 871, 436, 1087, 1029, 66, 561, 798, 1141, 701, 1020, 1072, 92, 636, 509, 392, 77, 84, 202, 843, 563, 329, 906, 101, 997, 1162, 105, 876, 460, 285, 446, 753, 516, 60, 932, 323,
    659, 9, 639, 1041, 861, 1199, 343, 792, 1114, 536, 405, 542, 805, 929, 589, 538, 410, 143, 114, 24, 1064, 682, 536, 1016, 1141, 843, 472, 817, 196, 673, 189, 915, 196, 755, 203, 956, 283, 833, 836, 22, 899, 232, 655, 572, 207, 819, 639,
    1024, 887, 407, 385, 251, 896, 165, 290, 193, 357, 870, 678, 411, 697, 998, 344, 628, 866, 1004, 894, 547, 574, 36, 847, 691, 601, 896, 363, 21, 1133, 115, 658, 855, 1042, 2, 189, 230, 215, 747, 971, 581, 809, 832, 311, 35, 639, 1127,
    701, 167, 672, 763, 997, 1061, 1170, 289, 806, 91, 198, 720, 67, 273, 863, 437, 152, 671, 635, 968, 107, 58, 453, 392, 236, 875, 719, 44, 850, 176, 580, 937, 227, 125, 851, 1188, 915, 747, 1175, 69, 743, 250, 275, 290, 787, 780, 516,
    775, 279, 256, 649, 83, 1180, 372, 655, 813, 750, 381, 807, 988, 977, 430, 282, 1067, 551, 726, 756, 372, 17, 1016, 550, 1128, 223, 174, 85, 1039, 1, 27, 178, 822, 243, 440, 79, 772, 211, 640, 454, 1141, 654, 351, 54, 794, 711, 157,
    492, 307, 1156, 937, 212, 461, 417, 741, 1104, 642, 1147, 833, 1194, 1066, 1070, 876, 1045, 341, 854, 1014, 787, 518, 404, 1068, 385, 756, 998, 298, 439, 917, 183, 71, 363, 38, 828, 372, 1071, 195, 481, 1153, 871, 712, 803, 849, 145,
    1144, 410, 420, 561, 678, 241, 498, 548, 436, 871, 810, 180, 635, 119, 665, 551, 1132, 807, 408, 685, 489, 274, 459, 28, 987, 935, 310, 284, 1163, 924, 812, 267, 1123, 782, 1065, 1075, 1199, 1047, 289, 280, 1044, 931, 1056, 625, 672,
    150, 41, 1084, 998, 151, 483, 226, 548, 277, 1187, 1010, 262, 1048, 493, 1084, 845, 1127, 1009, 773, 129, 547, 798, 118, 559, 463, 972, 666, 1155, 519, 381, 405, 819, 201, 790, 729, 1100, 614, 691, 3, 386, 206, 514, 387, 612, 1073, 158,
    67, 1116, 164, 496, 1056, 1159, 348, 530, 28, 1177, 774, 1139, 559, 563, 310, 916, 897, 36, 1060, 173, 952, 123, 635, 911, 711, 304, 611, 481, 645, 532, 1033, 385, 402, 797, 117, 307, 969, 1147, 1127, 434, 1099, 1043, 104, 74, 257, 778,
    934, 901, 106, 84, 525, 138, 698, 877, 1009, 487, 450, 649, 736, 802, 1032, 456, 757, 10, 2, 720, 1155, 234, 844, 880, 1053, 1134, 821, 1094, 970, 1095, 976, 101, 1163, 104, 38, 198, 350, 896, 345, 867, 1129, 1064, 403, 228, 1103, 416,
    561, 722, 915, 1161, 252, 45, 632, 1163, 232, 174, 964, 876, 1126, 479, 432, 984, 815, 544, 1005, 620, 497, 1021, 763, 169, 1028, 706, 1112, 150, 368, 483, 251, 721, 492, 686, 1105, 38, 1140, 1085, 153, 366, 428, 296, 28, 648, 873, 21,
    236, 393, 581, 1043, 1086, 747, 402, 201, 1196, 416, 788, 318, 257, 815, 735, 1023, 1143, 1100, 922, 1033, 884, 824, 963, 159, 904, 21, 1168, 511, 723, 400, 239, 338, 89, 1099, 572, 674, 54, 891, 426, 277, 91, 504, 302, 616, 468, 506,
    917, 491, 744, 1091, 1051, 594, 465, 850, 338, 417, 320, 1160, 364, 480, 855, 86, 305, 225, 833, 637, 760, 1147, 613, 236, 460, 664, 1183, 38, 806, 100, 654, 852, 975, 816, 506, 1092, 275, 6, 229, 972, 53, 554, 370, 63, 651, 701, 304,
    1011, 672, 353, 118, 1111, 448, 549, 151, 1087, 909, 420, 1095, 663, 1119, 1124, 729, 578, 733, 861, 1154, 1195, 387, 1182, 850, 189, 463, 1129, 1185, 541, 546, 1159, 314, 137, 479, 59, 841, 514, 548, 496, 642, 341, 151, 999, 1036,
    1186, 704, 550, 1039, 723, 779, 584, 382, 371, 712, 176, 665, 180, 440, 697, 1102, 408, 728, 157, 1050, 558, 692, 336, 384, 107, 839, 477, 204, 862, 345, 429, 1144, 1069, 207, 449, 594, 963, 988, 843, 334, 200, 865, 281, 296, 1040, 914,
    995, 743, 1134, 1050, 484, 602, 1001, 570, 1052, 1106, 922, 77, 1099, 681, 360, 955, 1184, 669, 411, 760, 46, 599, 815, 231, 86, 694, 469, 1079, 1161, 1105, 519, 1010, 681, 603, 376, 534, 145, 361, 448, 1006, 91, 397, 671, 597, 238,
    119, 467, 587, 723, 162, 804, 638, 568, 195, 460, 610, 868, 806, 995, 1178, 490, 406, 933, 232, 17, 37, 2, 114, 1004, 871, 531, 209, 267, 37, 750, 1196, 940, 89, 725, 377, 898, 6, 685, 210, 1127, 1160, 432, 391, 931, 681, 937, 275,
    1190, 137, 743, 652, 430, 566, 180, 1192, 718, 253, 133, 998, 1067, 764, 747, 1159, 827, 143, 506, 641, 327, 468, 731, 50, 15, 569, 80, 310, 1086, 1092, 989, 245, 520, 711, 788, 1144, 938, 1152, 1169, 563, 1053, 1182, 331, 838, 112,
    361, 1049, 717, 979, 956, 434, 534, 1083, 117, 280, 1104, 293, 1137, 592, 1019, 606, 526, 216, 924, 197, 137, 1041, 2, 910, 274, 1178, 267, 521, 626, 764, 691, 124, 446, 337, 676, 325, 288, 1120, 924, 512, 777, 1063, 979, 86, 677, 1183,
    777, 418, 41, 852, 929, 712, 1132, 1030, 339, 943, 475, 851, 340, 894, 1091, 230, 654, 229, 945, 69, 182, 110, 255, 895, 645, 1061, 793, 1016, 807, 440, 330, 519, 73, 108, 660, 209, 1077, 1191, 938, 415, 1162, 579, 258, 14, 273, 561,
    834, 371, 134, 1118, 1139, 1163, 667, 979, 483, 436, 42, 593, 139, 846, 875, 571, 808, 76, 713, 1198, 352, 299, 156, 793, 509, 245, 697, 1106, 236, 287, 236, 644, 683,
  ],
  capital = [
    275, 430, 1008, 802, 1067, 152, 913, 662, 1026, 1173, 799, 478, 1029, 392, 550, 418, 630, 1184, 1083, 709, 732, 85, 983, 1175, 762, 783, 857, 652, 867, 11, 279, 915, 349, 1096, 351, 1070, 237, 434, 647, 590, 669, 874, 14, 613, 1080,
    695, 719, 193, 939, 813, 580, 292, 1058, 1008, 502, 954, 710, 124, 272, 562, 615, 1019, 1010, 431, 1150, 433, 1039, 1036, 161, 1074, 1106, 1014, 206, 1173, 121, 294, 554, 628, 1180, 723, 238, 1121, 1007, 613, 1061, 948, 324, 267, 814,
    425, 95, 1078, 323, 642, 284, 50, 386, 1134, 555, 1061, 275, 1101, 643, 616, 173, 411, 531, 1013, 913, 317, 1003, 402, 873, 231, 817, 374, 378, 132, 18, 619, 1013, 587, 37, 314, 656, 218, 316, 621, 784, 970, 802, 186, 778, 769, 580,
    913, 794, 160, 1176, 125, 969, 577, 701, 863, 78, 698, 838, 1155, 942, 541, 632, 976, 100, 782, 65, 52, 527, 1191, 336, 1081, 516, 599, 527, 347, 1174, 909, 707, 743, 280, 448, 172, 207, 999, 344, 99, 520, 207, 370, 280, 455, 1181, 90,
    862, 1056, 1162, 920, 704, 477, 1036, 99, 458, 170, 684, 1, 187, 298, 43, 326, 172, 1156, 976, 1087, 947, 67, 825, 1102, 1148, 758, 45, 563, 973, 924, 170, 330, 754, 520, 693, 1134, 369, 12, 1092, 183, 1145, 839, 604, 804, 110, 695,
    440, 44, 250, 726, 61, 596, 873, 204, 320, 447, 1085, 518, 311, 100, 1070, 990, 457, 593, 374, 976, 828, 904, 528, 822, 78, 622, 497, 907, 248, 502, 793, 848, 811, 1122, 973, 1044, 744, 1086, 841, 299, 635, 397, 1099, 905, 1033, 980,
    997, 551, 56, 352, 455, 653, 294, 179, 661, 248, 1018, 333, 1, 241, 259, 77, 689, 1011, 818, 669, 636, 427, 730, 641, 62, 1138, 1155, 520, 499, 307, 46, 240, 1068, 380, 87, 1117, 171, 287, 1100, 45, 1071, 467, 1150, 118, 1106, 718,
    1191, 753, 324, 275, 1169, 587, 346, 1157, 1094, 245, 243, 220, 996, 631, 41, 311, 759, 1170, 344, 201, 496, 338, 913, 58, 671, 824, 918, 180, 344, 262, 1038, 623, 854, 785, 713, 367, 1101, 514, 179, 616, 722, 612, 390, 561, 148, 739,
    32, 397, 905, 688, 160, 1021, 117, 22, 547, 1035, 1022, 893, 597, 430, 872, 101, 106, 421, 928, 200, 992, 812, 41, 1171, 412, 737, 910, 412, 398, 379, 356, 119, 828, 1138, 1006, 548, 1182, 718, 558, 956, 598, 751, 381, 502, 943, 823,
    858, 842, 211, 786, 592, 1064, 764, 722, 734, 1014, 628, 722, 613, 1054, 39, 251, 282, 690, 1168, 338, 119, 237, 1177, 71, 432, 63, 1010, 354, 427, 773, 661, 581, 320, 656, 673, 352, 265, 724, 548, 1021, 834, 636, 420, 867, 868, 709,
    1012, 95, 585, 167, 649, 660, 179, 984, 632, 611, 1109, 26, 550, 1085, 61, 218, 819, 263, 217, 1067, 1043, 1187, 306, 1193, 611, 983, 973, 61, 433, 220, 722, 953, 364, 1070, 79, 853, 127, 1137, 199, 35, 245, 1140, 318, 1119, 144, 459,
    1156, 650, 913, 660, 841, 639, 853, 882, 257, 162, 864, 387, 1168, 1185, 876, 797, 621, 900, 41, 56, 744, 1024, 539, 433, 148, 582, 619, 508, 1123, 184, 1199, 1014, 584, 469, 1120, 175, 945, 494, 269, 724, 74, 58, 627, 209, 424, 1114,
    966, 162, 134, 426, 162, 507, 266, 57, 1055, 522, 140, 1083, 151, 501, 441, 567, 25, 294, 601, 147, 714, 955, 605, 632, 643, 698, 649, 362, 553, 268, 1101, 939, 697, 762, 848, 731, 150, 138, 544, 1013, 1063, 751, 1014, 829, 361, 933,
    415, 173, 1118, 716, 1133, 764, 662, 958, 107, 270, 739, 792, 478, 519, 236, 267, 707, 829, 532, 347, 126, 190, 637, 985, 604, 759, 952, 572, 1150, 1199, 472, 33, 69, 797, 195, 332, 101, 987, 66, 1089, 901, 1030, 1188, 1142, 1130, 1044,
    24, 1048, 901, 1124, 589, 75, 50, 136, 797, 1122, 1145, 1025, 964, 25, 411, 432, 940, 72, 17, 1183, 871, 990, 101, 1035, 250, 1176, 564, 632, 494, 389, 64, 10, 754, 71, 914, 10, 296, 524, 374, 894, 1187, 585, 504, 175, 858, 1083, 1077,
    7, 103, 390, 885, 1120, 1181, 1159, 752, 670, 1148, 23, 152, 1136, 173, 1043, 657, 267, 358, 792, 1144, 612, 477, 1042, 1058, 846, 560, 1189, 695, 548, 250, 900, 340, 1092, 1162, 225, 576, 618, 1136, 485, 591, 305, 513, 65, 221, 1062,
    880, 303, 196, 1167, 415, 148, 1140, 1067, 511, 26, 63, 515, 232, 1001, 456, 394, 418, 999, 181, 1042, 428, 1041, 829, 839, 29, 478, 12, 766, 75, 178, 994, 606, 1089, 681, 870, 423, 664, 1004, 357, 184, 988, 75, 963, 740, 775, 427, 123,
    1039, 476, 815, 799, 739, 737, 138, 824, 228, 197, 291, 1121, 805, 645, 229, 1172, 68, 1011, 612, 925, 1056, 719, 593, 735, 688, 1180, 684, 1085, 220, 63, 176, 198, 257, 969, 496, 1087, 55, 664, 823, 280, 6, 655, 756, 814, 516, 445,
    220, 707, 186, 641, 779, 729, 712, 136, 982, 33, 594, 1043, 888, 429, 750, 840, 512, 484, 77, 223, 577, 664, 8, 448, 326, 518, 514, 771, 681, 280, 351, 149, 894, 106, 563, 966, 529, 123, 799, 532, 804, 837, 261, 973, 427, 515, 645, 906,
    927, 51, 856, 528, 260, 324, 757, 542, 918, 636, 1060, 1064, 1, 1128, 165, 65, 948, 518, 222, 521, 791, 983, 699, 402, 927, 41, 543, 1194, 474, 309, 777, 398, 1058, 800, 97, 1009, 1040, 245, 180, 676, 980, 653, 659, 997, 1143, 978, 6,
    315, 475, 218, 1075, 909, 291, 20, 19, 941, 945, 437, 168, 972, 16, 1147, 1008, 969, 232, 1114, 267, 832, 208, 920, 910, 717, 1101, 899, 744, 809, 47, 767, 482, 825, 193, 577, 1007, 31, 478, 382, 407, 905, 830, 843, 336, 103, 904, 763,
    91, 14, 283, 692, 330, 924, 583, 1106, 1065, 572, 786, 808, 350, 177, 386, 936, 503, 1125, 788, 176, 669, 836, 1014, 1023, 28, 798, 296, 423, 464, 190, 554,
  ];

console.log(findMaximizedCapital(k, w, profits, capital));
